class Dlac {

  static final List<int> _dlacCode = [
    0x03, 0x41, 0x42, 0x43, 0x44, 0x45, 0x46, 0x47, 0x48, 0x49, 0x4A, 0x4B,
    0x4C, 0x4D, 0x4E, 0x4F, 0x50, 0x51, 0X52, 0x53, 0x54, 0x55, 0x56, 0x57,
    0x58, 0x59, 0x5A, 0x00, 0x09, 0x1e, 0x0a, 0x00, 0x20, 0x21, 0x22, 0x23,
    0x24, 0x25, 0x26, 0x27, 0x28, 0x29, 0x2A, 0x2B, 0x2C, 0x2D, 0x2E, 0x2F,
    0x30, 0x31, 0x32, 0x33, 0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x3A, 0x3B,
    0x3C, 0x3D, 0x3E, 0x3F
  ];

  static String decode(int b1, int b2, int b3) {
    int holder = ((b1 & 0xFF) << 24) + ((b2 & 0xFF) << 16) + ((b3 & 0xFF) << 8);

    /*
     * 4 chars in 3 bytes
     */
    int firstChar = _dlacCode[((holder & 0xFC000000) >> 26) & 0x3F];
    int secondChar = _dlacCode[((holder & 0x03F00000) >> 20) & 0x3F];
    int thirdChar = _dlacCode[((holder & 0x000FC000) >> 14) & 0x3F];
    int fourthChar = _dlacCode[((holder & 0x00003F00) >> 8) & 0x3F];

    String output = String.fromCharCodes([firstChar, secondChar, thirdChar, fourthChar]);
    return output;
  }

  static String format(String input) {
    if (input.isNotEmpty) {
      input = input.split("\u001E")[0];
      input = input.replaceAll("\n\t[A-Z]{1}", "\n"); /* remove invalid chars after newline */
    }
    return input;
  }

}